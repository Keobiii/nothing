    on<ToggleCartEvent>((event, emit) {
      List<Product> updatedCart = state is CartLoaded
        ? List<Product>.from((state as CartLoaded).cart)
        : [];

      if (updatedCart.contains(event.product)) {
        for(Product element in updatedCart) {
          element.quantity++;

          if (element.quantity > element.totalQuantity) {
            // Error
          }
        }
      } else {
        updatedCart.add(event.product);
      }


      emit(CartLoaded(updatedCart));
    });
